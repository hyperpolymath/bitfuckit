// SPDX-License-Identifier: MPL-2.0-or-later
= CLI Reference
:toc: left
:toclevels: 3
:icons: font
:source-highlighter: rouge

Complete reference for all bitfuckit commands.

== Global Options

[cols="2,3"]
|===
|Option |Description

|`--help`, `-h`
|Show help message

|`--version`, `-v`
|Show version information

|`--workspace <name>`
|Override default workspace (from config)
|===

== Authentication Commands

=== `auth login`

Authenticate with Bitbucket using an app password.

[source,bash]
----
bitfuckit auth login
----

Prompts for:

* Username
* App password
* Default workspace

Credentials are stored in `~/.config/bitfuckit/config`.

=== `auth status`

Check current authentication status.

[source,bash]
----
bitfuckit auth status
----

*Output:*
[source]
----
✓ Authenticated as: username
  Workspace: workspace-slug
----

== Repository Commands

=== `repo create`

Create a new repository.

[source,bash]
----
bitfuckit repo create <name> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--private`
|false
|Create as private repository

|`--description <text>`
|empty
|Repository description

|`--project <key>`
|none
|Bitbucket project key
|===

*Examples:*
[source,bash]
----
# Public repository
bitfuckit repo create my-project

# Private with description
bitfuckit repo create my-project --private --description "My project"

# In a specific project
bitfuckit repo create my-project --project MYPROJ
----

=== `repo list`

List all repositories in the workspace.

[source,bash]
----
bitfuckit repo list [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--format <type>`
|table
|Output format: `table`, `json`, `simple`

|`--limit <n>`
|50
|Maximum repositories to list
|===

*Output:*
[source]
----
Repositories in hyperpolymath:

  my-project (private)
  another-repo (public)
  test-repo (private)

Total: 3 repository(s)
----

=== `repo delete`

Delete a repository (with confirmation).

[source,bash]
----
bitfuckit repo delete <name>
----

*Warning:* This is permanent and cannot be undone.

*Example:*
[source,bash]
----
$ bitfuckit repo delete old-repo
⚠️  This will permanently delete 'old-repo'. Type the repository name to confirm: old-repo
✓ Repository 'old-repo' deleted.
----

=== `repo exists`

Check if a repository exists.

[source,bash]
----
bitfuckit repo exists <name>
----

*Exit codes:*

* `0` — Repository exists
* `1` — Repository does not exist

*Example:*
[source,bash]
----
$ bitfuckit repo exists my-project
✓ Repository 'my-project' exists
----

== Pull Request Commands

=== `pr list`

List pull requests for a repository.

[source,bash]
----
bitfuckit pr list <repo> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--state <state>`
|OPEN
|Filter by state: `OPEN`, `MERGED`, `DECLINED`

|`--all`
|false
|Show all PRs regardless of state

|`--limit <n>`
|25
|Maximum PRs to list
|===

=== `pr create`

Create a new pull request.

[source,bash]
----
bitfuckit pr create <repo> --source <branch> --dest <branch> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--source <branch>`
|(required)
|Source branch

|`--dest <branch>`
|main
|Destination branch

|`--title <text>`
|auto
|PR title

|`--description <text>`
|empty
|PR description

|`--reviewers <users>`
|none
|Comma-separated reviewer usernames

|`--close-source`
|true
|Delete source branch after merge
|===

=== `pr view`

View pull request details.

[source,bash]
----
bitfuckit pr view <repo> <pr-id>
----

=== `pr merge`

Merge a pull request.

[source,bash]
----
bitfuckit pr merge <repo> <pr-id> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--strategy <type>`
|merge_commit
|Merge strategy: `merge_commit`, `squash`, `fast_forward`

|`--message <text>`
|auto
|Commit message

|`--close-source`
|true
|Delete source branch
|===

=== `pr approve`

Approve a pull request.

[source,bash]
----
bitfuckit pr approve <repo> <pr-id>
----

=== `pr decline`

Decline a pull request.

[source,bash]
----
bitfuckit pr decline <repo> <pr-id> [--reason <text>]
----

=== `pr comment`

Add a comment to a pull request.

[source,bash]
----
bitfuckit pr comment <repo> <pr-id> "<comment>"
----

=== `pr diff`

Show the diff for a pull request.

[source,bash]
----
bitfuckit pr diff <repo> <pr-id>
----

== Mirror Command

=== `mirror`

Mirror the current repository to Bitbucket.

[source,bash]
----
bitfuckit mirror <target-name> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--all-branches`
|true
|Push all branches

|`--tags`
|true
|Push all tags

|`--force`
|false
|Force push (overwrites history)
|===

*Usage:*
[source,bash]
----
# From within a git repository
cd my-github-repo
bitfuckit mirror my-repo
----

*What it does:*

. Creates the target repository on Bitbucket (if not exists)
. Adds Bitbucket as a remote
. Pushes all branches
. Pushes all tags

== Issue Commands

=== `issue list`

List issues for a repository.

[source,bash]
----
bitfuckit issue list <repo> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--state <state>`
|open
|Filter: `new`, `open`, `resolved`, `closed`, `all`

|`--kind <type>`
|all
|Filter: `bug`, `enhancement`, `proposal`, `task`

|`--priority <level>`
|all
|Filter: `trivial`, `minor`, `major`, `critical`, `blocker`

|`--assignee <user>`
|all
|Filter by assignee username
|===

=== `issue create`

Create a new issue.

[source,bash]
----
bitfuckit issue create <repo> "<title>" [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--kind <type>`
|bug
|Issue type: `bug`, `enhancement`, `proposal`, `task`

|`--priority <level>`
|major
|Priority level

|`--content <text>`
|empty
|Issue description

|`--assignee <user>`
|none
|Assign to user

|`--component <name>`
|none
|Component name

|`--milestone <name>`
|none
|Milestone name
|===

=== `issue view`

View issue details.

[source,bash]
----
bitfuckit issue view <repo> <issue-id>
----

=== `issue update`

Update an issue.

[source,bash]
----
bitfuckit issue update <repo> <issue-id> [options]
----

=== `issue comment`

Add a comment to an issue.

[source,bash]
----
bitfuckit issue comment <repo> <issue-id> "<comment>"
----

== Pipeline Commands

=== `pipeline list`

List pipelines for a repository.

[source,bash]
----
bitfuckit pipeline list <repo> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--state <state>`
|all
|Filter: `SUCCESSFUL`, `FAILED`, `IN_PROGRESS`

|`--branch <name>`
|all
|Filter by branch name
|===

=== `pipeline trigger`

Trigger a pipeline.

[source,bash]
----
bitfuckit pipeline trigger <repo> <branch> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--custom <name>`
|none
|Custom pipeline name

|`--var <KEY=value>`
|none
|Pipeline variable (repeatable)
|===

=== `pipeline view`

View pipeline details.

[source,bash]
----
bitfuckit pipeline view <repo> <uuid>
----

=== `pipeline logs`

View pipeline logs.

[source,bash]
----
bitfuckit pipeline logs <repo> <pipeline-uuid> [step-uuid]
----

=== `pipeline stop`

Stop a running pipeline.

[source,bash]
----
bitfuckit pipeline stop <repo> <uuid>
----

=== `pipeline vars`

List pipeline variables.

[source,bash]
----
bitfuckit pipeline vars <repo>
----

=== `pipeline var create`

Create a pipeline variable.

[source,bash]
----
bitfuckit pipeline var create <repo> <key> <value> [--secured]
----

== Webhook Commands

=== `webhook list`

List webhooks for a repository.

[source,bash]
----
bitfuckit webhook list <repo>
----

=== `webhook create`

Create a webhook.

[source,bash]
----
bitfuckit webhook create <repo> <url> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--description <text>`
|empty
|Webhook description

|`--events <list>`
|repo:push
|Comma-separated events

|`--secret <text>`
|none
|HMAC secret
|===

=== `webhook delete`

Delete a webhook.

[source,bash]
----
bitfuckit webhook delete <repo> <uuid>
----

=== `webhook enable` / `webhook disable`

Enable or disable a webhook.

[source,bash]
----
bitfuckit webhook enable <repo> <uuid>
bitfuckit webhook disable <repo> <uuid>
----

== Team Commands

=== `member list`

List workspace members.

[source,bash]
----
bitfuckit member list
----

=== `member invite`

Invite a user to the workspace.

[source,bash]
----
bitfuckit member invite <email> [--groups <list>]
----

=== `group list`

List workspace groups.

[source,bash]
----
bitfuckit group list
----

=== `group create`

Create a group.

[source,bash]
----
bitfuckit group create <name> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--permission <level>`
|read
|Permission: `read`, `write`, `admin`

|`--auto-add`
|false
|Auto-add new members
|===

=== `permission grant`

Grant repository permission to a user.

[source,bash]
----
bitfuckit permission grant <repo> <username> <level>
----

=== `permission revoke`

Revoke repository permission from a user.

[source,bash]
----
bitfuckit permission revoke <repo> <username>
----

=== `branch-restriction create`

Create a branch restriction.

[source,bash]
----
bitfuckit branch-restriction create <repo> <type> [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--pattern <glob>`
|main
|Branch pattern

|`--users <list>`
|none
|Allowed users

|`--groups <list>`
|none
|Allowed groups
|===

=== `default-reviewer add`

Add a default reviewer.

[source,bash]
----
bitfuckit default-reviewer add <repo> <username>
----

=== `deploy-key add`

Add a deploy key.

[source,bash]
----
bitfuckit deploy-key add <repo> --key-file <path> --label <name>
----

== TUI Command

=== `tui`

Launch the interactive terminal interface.

[source,bash]
----
bitfuckit tui
# or simply
bitfuckit
----

The TUI provides a menu-driven interface for all operations.

See link:TUI-Guide[TUI Guide] for detailed usage.

== GraphQL Commands

=== `graphql serve`

Start the GraphQL API server.

[source,bash]
----
bitfuckit graphql serve [options]
----

*Options:*
[cols="2,1,3"]
|===
|Option |Default |Description

|`--port <n>`
|4000
|Server port

|`--playground`
|false
|Enable GraphQL Playground
|===

See link:GraphQL-API[GraphQL API] for schema and queries.

== Exit Codes

[cols="1,3"]
|===
|Code |Meaning

|0
|Success

|1
|General error

|2
|Authentication error

|3
|Network error

|4
|Repository not found

|5
|Permission denied
|===

== Environment Variables

[cols="2,3"]
|===
|Variable |Description

|`BITFUCKIT_CONFIG`
|Override config file location

|`BITFUCKIT_WORKSPACE`
|Override default workspace

|`BITFUCKIT_DEBUG`
|Enable debug output (set to `1`)

|`NO_COLOR`
|Disable colored output
|===

== Configuration File

Default location: `~/.config/bitfuckit/config`

[source,ini]
----
[credentials]
username=your-username
app_password=your-app-password
workspace=your-workspace

[preferences]
default_visibility=private
color=true
----
